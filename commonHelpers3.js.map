{"version":3,"file":"commonHelpers3.js","sources":["../src/js/shopping.js","../src/js/pagination.js"],"sourcesContent":["import amazonImg from '/amazon.png';\nimport booksImg from '/books.png';\nimport iconTrash from '../img/sprite.svg';\n\nconst suportEl = document.querySelector('.card');\n\nwindow.addEventListener('load', () => {\n    const widthWindow = screen.width;\n    if (Number(widthWindow) > Number(1439)) {\n      suportEl.classList.remove('is-hidden');\n    } else {\n      suportEl.classList.add('is-hidden');\n    };\n});\n\nconst LOCAL_KEY = localStorage.getItem('shoppingList');\nlet parsedSettings = JSON.parse(LOCAL_KEY);\n\nconst shoppingDefaultEl = document.querySelector('.shopping-default');\nconst shoppingBoxContainer = document.querySelector('.shopping-box-container');\n\nexport function createShopping(arr) {\n  \n  shoppingBoxContainer.innerHTML = '';\n\n  let result = [];\n  arr.map(({ description, amazon_product_url, author, book_image, _id, list_name, title, buy_links }) => {\n    result.push(`<div class=\"shopping-box\" data-item-id=\"${_id}\">\n      <div class=\"shopping-book-img\">\n        <img class=\"shopping-genre-img\" src=\"${book_image}\" alt=\"Title - 'WISH'\">\n      </div>\n      <div class=\"shopping-book-info\">\n        <h2 class=\"shopping-book-title\">${title}</h2>\n        <span class=\"shopping-book-category\">${list_name}</span>\n        <p class=\"shopping-book-discription\">${description}</p>\n        <span class=\"shopping-book-author\">${author}</span>\n\n        <a class=\"img__src-amazon\" href=\"${amazon_product_url}\">\n          <img class=\"mdl-logo-amazon\" src=\"${amazonImg}\" alt=\"logo amazon\" width=\"62\" height=\"19\">\n        </a>\n        <a class=\"img__src-books\" href=\"${buy_links[1].url}\">\n          <img class=\"mdl-logo-book\" src=\"${booksImg}\" alt=\"logo book\" width=\"33\" height=\"32\">\n        </a>\n      </div>\n      <button class=\"shopping-remove-btn\" type=\"button\">\n        <svg class=\"remove-btn\" width=\"16\" height=\"16\" viewBox=\"0 0 32 32\">\n          <use href=\"${iconTrash}#icon-trash\"></use>\n        </svg>\n      </button>\n    </div>`);\n  });\n\n  const control = arr.length == [].length;\n  if (control) {\n    shoppingDefaultEl.classList.remove('is-hidden');\n  } else {\n    shoppingDefaultEl.classList.add('is-hidden');\n    shoppingBoxContainer.insertAdjacentHTML('afterbegin', result.join(''));\n  }\n}\n\ncreateShopping(parsedSettings);\n\nshoppingBoxContainer.addEventListener('click', (event) => {\n  const removeButton = event.target.closest('.shopping-remove-btn');\n\n  if (removeButton) {\n    const shoppingBox = removeButton.closest('.shopping-box');\n\n    if (shoppingBox) {\n      const itemId = shoppingBox.dataset.itemId;\n\n      removeBookFromShoppingList(itemId);\n\n      \n      parsedSettings = JSON.parse(localStorage.getItem('shoppingList'));\n\n      \n      createShopping(parsedSettings);\n    }\n  }\n});\n\nfunction removeBookFromShoppingList(itemId) {\n  // Знаходимо індекс книги за itemId\n  const indexToRemove = parsedSettings.findIndex(item => item._id === itemId);\n  if (indexToRemove !== -1) {\n    // Видаляємо тільки вибрану книгу за індексом\n    parsedSettings.splice(indexToRemove, 1);\n    \n\n    // Оновлюємо localStorage\n    localStorage.setItem('shoppingList', JSON.stringify(parsedSettings));\n  }\n}","import { createShopping } from './shopping';\n\nconst storedData = localStorage.getItem('shoppingList');\nconst shoppingList = JSON.parse(storedData);\nconst paginationPages = document.querySelector('.pagination-pages');\nconst shoppingContainer = document.querySelector('.shopping-container');\nlet itemsPerPage = 3; \nlet currentPage = 1;\n\nfunction chunkArray(array, chunkSize) {\n    const result = [];\n    for (let i = 0; i < array.length; i += chunkSize) {\n      result.push(array.slice(i, i + chunkSize));\n    }\n    return result;\n}\n\nconst chunkedArray = chunkArray(shoppingList, itemsPerPage);\nconst totalPages = Math.ceil(shoppingList.length / itemsPerPage);\n\nfunction createBtnMarkup (pageNumber) {\n    const markup = `<button class=\"pagination-pages-btn\"  data-page=\"${pageNumber}\">\n        <span class=\"pagination-pages-numbers\">${pageNumber}</span></button>`;\n    paginationPages.insertAdjacentHTML('afterbegin', markup);\n    const button = document.querySelector(`[data-page=\"${pageNumber}\"]`);\n    button.addEventListener('click', function () {\n        currentPage = pageNumber;\n        displayItems();\n        updateActivePageButton();\n    });\n}\n\nfunction updateActivePageButton() {\n    const buttons = document.querySelectorAll('.pagination-pages-btn');\n    buttons.forEach(button => {\n        const page = parseInt(button.dataset.page);\n        if (page === currentPage) {\n            button.classList.add('pagination-pages-btn-active');\n        } else {\n            button.classList.remove('pagination-pages-btn-active');\n        }\n    });\n}\n\nfunction displayItems() {\n    const currentPageItems = chunkedArray[currentPage - 1];\n    createShopping(currentPageItems);\n}\n\nfunction createBtnPages() {\n    if (shoppingList.length > itemsPerPage) {\n        for (let i = 2; i <= totalPages; i++) {\n            createBtnMarkup(i);\n        }\n    }\n}\n\n\n\n\nfunction checkShoppingList() {\n    setInterval(() => {\n        if ( shoppingContainer.children.length == 0) {\n            pagination.classList.add('is-hidden');\n        }\n        if (shoppingContainer.children.length < itemsPerPage) {\n            updateActivePageButton(1);\n        }\n      }, 100);\n      pagination.classList.remove('is-hidden');\n \n}\n\n\n\n\ncheckShoppingList();//test\ncreateBtnPages(1);\ncreateBtnMarkup(1);//knopka\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["suportEl","widthWindow","LOCAL_KEY","parsedSettings","shoppingDefaultEl","shoppingBoxContainer","createShopping","arr","result","description","amazon_product_url","author","book_image","_id","list_name","title","buy_links","amazonImg","booksImg","iconTrash","event","removeButton","shoppingBox","itemId","removeBookFromShoppingList","indexToRemove","item","storedData","shoppingList","paginationPages","shoppingContainer","itemsPerPage","currentPage","chunkArray","array","chunkSize","i","chunkedArray","totalPages","createBtnMarkup","pageNumber","markup","displayItems","updateActivePageButton","button","currentPageItems","createBtnPages","checkShoppingList"],"mappings":"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"}