{"version":3,"file":"commonHelpers.js","sources":["../src/js/BOOKS_API.js","../src/js/all_categories.js","../src/js/categories_book.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nexport async function getCategoryList() {\n  const params = 'category-list';\n  return await axios.get(`${BASE_URL}${params}`);\n}\n\nexport async function getTopBooks() {\n  const params = 'top-books';\n  return await axios.get(`${BASE_URL}${params}`);\n}\n\nexport async function getBooksByCategory(selectedCategory) {\n  const params = 'category?category=';\n  return await axios.get(`${BASE_URL}${params}${selectedCategory}`);\n}\n\nexport async function getBooksId(idBook) {\n  return await axios.get(`${BASE_URL}${idBook}`);\n}\n","import { getCategoryList } from '../js/BOOKS_API';\n\nconst elem = {\n  AllCategoriesContainer: document.querySelector('.all-categories-container'),\n  AllCategoriesList: document.querySelector('.js-categories-list'),\n};\n\n// Функція створення розмітки\n\nfunction createMarkupCategoryList(arr) {\n  return arr\n    .map(\n      ({ list_name }) =>\n        `<li class=\"categories-list-item\"><a href=\"#\">${list_name}</a></li>`\n    )\n    .join('');\n}\n\n// Рендеринг\n\nallCategoriesStatic();\n\ngetCategoryList()\n  .then(object => {\n    elem.AllCategoriesList.insertAdjacentHTML(\n      'beforeend',\n      createMarkupCategoryList(object.data)\n    );\n  })\n  .catch(error => console.log(error));\n\n// 'All Categories' завжди перше в списку\n\nfunction allCategoriesStatic() {\n  const staticName = document.createElement('li');\n  staticName.classList.add('categories-list-item', 'category-active');\n  staticName.textContent = 'All Categories';\n  elem.AllCategoriesList.prepend(staticName);\n}\n","import { all } from 'axios';\nimport { getTopBooks, getBooksByCategory } from './BOOKS_API';\n\nconst categoriesBook = document.querySelector('.categories-books-all');\nconst categoriesBooksTitle = document.querySelector('.categories-books-title');\nconst loader = document.querySelector('.loader');\n\nwindow.addEventListener('load', onLoad);\ncategoriesBook.addEventListener('click', onSeeMore);\n\nasync function onLoad() {\n  loader.style.display = 'none';\n  try {\n    const topBooks = await getTopBooks();\n    const categories = createCategories(topBooks.data);\n    addCategoriesMarkup(categories);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction createCategories(arr = []) {\n  return arr\n    .map(({ list_name, books }) => {\n      return `\n      <div class=\"categories-books-genre-title\"> ${list_name}\n        <ul class=\"categories-books-genre-all-books\">\n        ${createCard(books)}\n        </ul>\n        <button class=\"categories-books-btn\">see more</button>\n      </div>\n      `;\n    })\n    .join('');\n}\n\nfunction createCard(books = []) {\n  return books\n    .map(({ _id, list_name, author, book_image, title }) => {\n      return `\n      <li class=\"categories-books-genre-book\" data-id=\"${_id}\" data-genre=\"${list_name}\">\n        <div class=\"categories-books-genre-book-img-thumb\">\n          <img class=\"categories-books-genre-book-img\"\n            src=\"${book_image}\" alt=\"Title - '${title}'\">\n        </div>\n        <h2 class=\"categories-books-genre-book-title\">${title}</h2>\n        <h3 class=\"categories-books-genre-book-author\">${author}</h3>\n      </li>\n      `;\n    })\n    .join('');\n}\n\nfunction addCategoriesMarkup(markup) {\n  categoriesBook.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function onSeeMore(evt) {\n  if (!evt.target.classList.contains('categories-books-btn')) {\n    return;\n  }\n  const parentEl = evt.target.previousElementSibling;\n  const seeMoreGenre = parentEl.firstElementChild.dataset.genre;\n  categoriesBooksTitle.innerHTML = seeMoreGenre;\n  try {\n    const booksByGenre = await getBooksByCategory(seeMoreGenre);\n\n    const allBooksByGenre = createCardByGenre(booksByGenre.data);\n\n    addCardByGenre(allBooksByGenre);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction createCardByGenre(books = []) {\n  return books\n    .map(({ _id, list_name, author, book_image, title }) => {\n      return `\n      <div class=\"categories-books-genre-all-books\">\n        <div class=\"categories-books-genre-books\" data-id=\"${_id}\" data-genre=\"${list_name}\">\n          <div class=\"categories-books-genre-book-img-thumb\">\n            <img class=\"categories-books-genre-book-img\"\n              src=\"${book_image}\" alt=\"Title - '${title}'\">\n          </div>\n          <h2 class=\"categories-books-genre-book-title\">${title}</h2>\n          <h3 class=\"categories-books-genre-book-author\">${author}</h3>\n        </div>\n      </div> \n      `;\n    })\n    .join('');\n}\n\nfunction addCardByGenre(markup) {\n  categoriesBook.innerHTML = markup;\n}\n\nexport { onSeeMore, createCardByGenre, addCardByGenre };\n"],"names":["BASE_URL","getCategoryList","params","axios","getTopBooks","getBooksByCategory","selectedCategory","elem","createMarkupCategoryList","arr","list_name","allCategoriesStatic","object","error","staticName","categoriesBook","categoriesBooksTitle","loader","onLoad","onSeeMore","topBooks","categories","createCategories","addCategoriesMarkup","err","books","createCard","_id","author","book_image","title","markup","evt","seeMoreGenre","booksByGenre","allBooksByGenre","createCardByGenre","addCardByGenre"],"mappings":"yFAEA,MAAMA,EAAW,6CAEV,eAAeC,GAAkB,CACtC,MAAMC,EAAS,gBACf,OAAO,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGE,CAAM,EAAE,CAC/C,CAEO,eAAeE,GAAc,CAClC,MAAMF,EAAS,YACf,OAAO,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGE,CAAM,EAAE,CAC/C,CAEO,eAAeG,EAAmBC,EAAkB,CACzD,MAAMJ,EAAS,qBACf,OAAO,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGE,CAAM,GAAGI,CAAgB,EAAE,CAClE,CCfA,MAAMC,EAAO,CACX,uBAAwB,SAAS,cAAc,2BAA2B,EAC1E,kBAAmB,SAAS,cAAc,qBAAqB,CACjE,EAIA,SAASC,EAAyBC,EAAK,CACrC,OAAOA,EACJ,IACC,CAAC,CAAE,UAAAC,CAAW,IACZ,gDAAgDA,CAAS,WAC5D,EACA,KAAK,EAAE,CACZ,CAIAC,IAEAV,EAAiB,EACd,KAAKW,GAAU,CACdL,EAAK,kBAAkB,mBACrB,YACAC,EAAyBI,EAAO,IAAI,CAC1C,CACA,CAAG,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAIpC,SAASF,GAAsB,CAC7B,MAAMG,EAAa,SAAS,cAAc,IAAI,EAC9CA,EAAW,UAAU,IAAI,uBAAwB,iBAAiB,EAClEA,EAAW,YAAc,iBACzBP,EAAK,kBAAkB,QAAQO,CAAU,CAC3C,CCnCA,MAAMC,EAAiB,SAAS,cAAc,uBAAuB,EAC/DC,EAAuB,SAAS,cAAc,yBAAyB,EACvEC,EAAS,SAAS,cAAc,SAAS,EAE/C,OAAO,iBAAiB,OAAQC,CAAM,EACtCH,EAAe,iBAAiB,QAASI,CAAS,EAElD,eAAeD,GAAS,CACtBD,EAAO,MAAM,QAAU,OACvB,GAAI,CACF,MAAMG,EAAW,MAAMhB,IACjBiB,EAAaC,EAAiBF,EAAS,IAAI,EACjDG,EAAoBF,CAAU,CAC/B,OAAQG,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,SAASF,EAAiBb,EAAM,GAAI,CAClC,OAAOA,EACJ,IAAI,CAAC,CAAE,UAAAC,EAAW,MAAAe,KACV;AAAA,mDACsCf,CAAS;AAAA;AAAA,UAElDgB,EAAWD,CAAK,CAAC;AAAA;AAAA;AAAA;AAAA,OAKtB,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,EAAWD,EAAQ,GAAI,CAC9B,OAAOA,EACJ,IAAI,CAAC,CAAE,IAAAE,EAAK,UAAAjB,EAAW,OAAAkB,EAAQ,WAAAC,EAAY,MAAAC,KACnC;AAAA,yDAC4CH,CAAG,iBAAiBjB,CAAS;AAAA;AAAA;AAAA,mBAGnEmB,CAAU,mBAAmBC,CAAK;AAAA;AAAA,wDAEGA,CAAK;AAAA,yDACJF,CAAM;AAAA;AAAA,OAG1D,EACA,KAAK,EAAE,CACZ,CAEA,SAASL,EAAoBQ,EAAQ,CACnChB,EAAe,mBAAmB,YAAagB,CAAM,CACvD,CAEA,eAAeZ,EAAUa,EAAK,CAC5B,GAAI,CAACA,EAAI,OAAO,UAAU,SAAS,sBAAsB,EACvD,OAGF,MAAMC,EADWD,EAAI,OAAO,uBACE,kBAAkB,QAAQ,MACxDhB,EAAqB,UAAYiB,EACjC,GAAI,CACF,MAAMC,EAAe,MAAM7B,EAAmB4B,CAAY,EAEpDE,EAAkBC,EAAkBF,EAAa,IAAI,EAE3DG,EAAeF,CAAe,CAC/B,OAAQX,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,SAASY,EAAkBX,EAAQ,GAAI,CACrC,OAAOA,EACJ,IAAI,CAAC,CAAE,IAAAE,EAAK,UAAAjB,EAAW,OAAAkB,EAAQ,WAAAC,EAAY,MAAAC,KACnC;AAAA;AAAA,6DAEgDH,CAAG,iBAAiBjB,CAAS;AAAA;AAAA;AAAA,qBAGrEmB,CAAU,mBAAmBC,CAAK;AAAA;AAAA,0DAEGA,CAAK;AAAA,2DACJF,CAAM;AAAA;AAAA;AAAA,OAI5D,EACA,KAAK,EAAE,CACZ,CAEA,SAASS,EAAeN,EAAQ,CAC9BhB,EAAe,UAAYgB,CAC7B"}