{"version":3,"file":"commonHelpers.js","sources":["../src/js/BOOKS_API.js","../src/js/categories_book.js","../src/js/all_categories.js","../src/js/suport.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nexport async function getCategoryList() {\n  const params = 'category-list';\n  return await axios.get(`${BASE_URL}${params}`);\n}\n\nexport async function getTopBooks() {\n  const params = 'top-books';\n  return await axios.get(`${BASE_URL}${params}`);\n}\n\nexport async function getBooksByCategory(selectedCategory) {\n  const params = 'category?category=';\n  return await axios.get(`${BASE_URL}${params}${selectedCategory}`);\n}\n\nexport async function getBooksId(idBook) {\n  return await axios.get(`${BASE_URL}${idBook}`);\n}\n","import { all } from 'axios';\nimport { getTopBooks, getBooksByCategory } from './BOOKS_API';\n\nconst categoriesBooks = document.querySelector('.categories-books');\nconst categoriesBook = document.querySelector('.categories-books-all');\nconst categoriesBooksTitle = document.querySelector('.categories-books-title');\nconst loader = document.querySelector('.loader');\n\nwindow.addEventListener('load', onLoad);\ncategoriesBook.addEventListener('click', onSeeMore);\ncategoriesBooks.addEventListener('click', onBack);\ncategoriesBook.addEventListener('click', onSeeMoreAboutBookBest);\ncategoriesBook.addEventListener('click', onSeeMoreAboutBookGenre);\n\nasync function onLoad() {\n  loader.style.display = 'none';\n  try {\n    const topBooks = await getTopBooks();\n    const categories = createCategories(topBooks.data);\n    addCategoriesMarkup(categories);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function loadBack() {\n  loader.style.display = 'none';\n  try {\n    const topBooks = await getTopBooks();\n    const categories = createCategories(topBooks.data);\n    categoriesBook.innerHTML = categories;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onBack(event) {\n  if (!event.target.classList.contains('categories-books-back-btn')) {\n    return;\n  }\n  const btn = event.target;\n  loadBack();\n  btn.remove();\n  categoriesBooksTitle.innerHTML =\n    'Best Sellers <span class=\"categories-books-title-accent\">Books';\n}\n\nfunction createCategories(arr = []) {\n  return arr\n    .map(({ list_name, books }) => {\n      return `\n      <div class=\"categories-books-genre-title\"> ${list_name}\n        <ul class=\"categories-books-genre-all-books\">\n        ${createCard(books)}\n        </ul>\n        <button class=\"categories-books-btn\">see more</button>\n      </div>\n      `;\n    })\n    .join('');\n}\n\nfunction createCard(books = []) {\n  return books\n    .map(({ _id, list_name, author, book_image, title }) => {\n      return `\n      <li class=\"categories-books-genre-book\" data-id=\"${_id}\" data-genre=\"${list_name}\">\n        <div class=\"categories-books-genre-book-img-thumb\">\n          <img class=\"categories-books-genre-book-img\"\n            src=\"${book_image}\" alt=\"Title - '${title}'\">\n          <div class=\"categories-books-genre-book-hover\">quick view </div>\n        </div>\n        <h2 class=\"categories-books-genre-book-title\">${title}</h2>\n        <h3 class=\"categories-books-genre-book-author\">${author}</h3>\n      </li>\n      `;\n    })\n    .join('');\n}\n\nfunction addCategoriesMarkup(markup) {\n  categoriesBook.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function onSeeMore(event) {\n  if (!event.target.classList.contains('categories-books-btn')) {\n    return;\n  }\n  const parentEl = event.target.previousElementSibling;\n  const seeMoreGenre = parentEl.firstElementChild.dataset.genre;\n  const genreByWord = seeMoreGenre.split(' ');\n  const lastWord = genreByWord.splice(-1, 1);\n  categoriesBooksTitle.innerHTML = `${genreByWord.join(\n    ' '\n  )} <span class=\"categories-books-title-accent\">${lastWord.toString()}</span>`;\n  categoriesBooksTitle.insertAdjacentHTML(\n    'afterend',\n    '<button class=\"categories-books-back-btn\">back to Best Sellers</button>'\n  );\n  try {\n    const booksByGenre = await getBooksByCategory(seeMoreGenre);\n\n    const allBooksByGenre = createCardByGenre(booksByGenre.data);\n\n    addCardByGenre(allBooksByGenre);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction createCardByGenre(books = []) {\n  return books\n    .map(({ _id, list_name, author, book_image, title }) => {\n      return `\n      <div class=\"categories-books-genre-all-books\">\n        <div class=\"categories-books-genre-books\" data-id=\"${_id}\" data-genre=\"${list_name}\">\n          <div class=\"categories-books-genre-book-img-thumb\">\n            <img class=\"categories-books-genre-book-img\"\n              src=\"${book_image}\" alt=\"Title - '${title}'\">\n              <div class=\"categories-books-genre-book-hover\">quick view </div>\n          </div>\n          <h2 class=\"categories-books-genre-book-title\">${title}</h2>\n          <h3 class=\"categories-books-genre-book-author\">${author}</h3>\n        </div>\n      </div> \n      `;\n    })\n    .join('');\n}\n\nfunction addCardByGenre(markup) {\n  categoriesBook.innerHTML = markup;\n}\n\nasync function onSeeMoreAboutBookBest(event) {\n  if (!event.target.closest('.categories-books-genre-book')) {\n    return;\n  }\n  const parentEl = event.target.closest('.categories-books-genre-book');\n  const elemId = parentEl.dataset.id;\n}\n\nasync function onSeeMoreAboutBookGenre(event) {\n  if (!event.target.closest('.categories-books-genre-books')) {\n    return;\n  }\n  const parentEl2 = event.target.closest('.categories-books-genre-books');\n  const elemId2 = parentEl2.dataset.id;\n}\n\nexport { onSeeMore, createCardByGenre, addCardByGenre };\n","\nimport { getCategoryList, getBooksByCategory } from '../js/BOOKS_API';\nimport {\n  createCardByGenre,\n  addCardByGenre,\n} from '../js/categories_book';\n\n\nconst elem = {\n  allCategoriesContainer: document.querySelector('.all-categories-container'),\n  allCategoriesList: document.querySelector('.js-categories-list'),\n  allCategoriesListItem: document.querySelector('.js-categories-list-item'),\n  categoriesBook: document.querySelector('.categories-books-all'),\n  categoriesBooksTitle: document.querySelector('.categories-books-title')\n};\n\n// Функція створення розмітки\n\nfunction createMarkupCategoryList(arr) {\n  return arr\n    .map(\n      ({ list_name }) =>\n        `<li class=\"categories-list-item js-categories-list-item\" data-category='${list_name}'><a href=\"\">${list_name}</a></li>`\n    )\n    .join('');\n}\n\n// Рендеринг\n\ngetCategoryList()\n  .then(object => {\n    elem.allCategoriesList.insertAdjacentHTML(\n      'beforeend',\n      createMarkupCategoryList(object.data)\n    );\n  })\n  .catch(error => console.log(error));\n\n// Функція кліку по категорії\n\n\n// function onCategoryClick(evt) {\n//   if (!evt.target.classList.contains('.js-categories-list-item')) {\n//     return;\n//   }\n//   const arrClass = [...elem.allCategoriesContainer.children];\n//   arrClass.map(item => item.classList.remove('category-active'));\n//   evt.target.classList.add('category-active');\n\n//   const categoryName = evt.target.dataset.list_name;\n\n//   if (evt.target.classList.contains('js-all-categories')) {\n//     return;\n//   } else {\n//     getBooksByCategory(categoryName);\n//   }\n// }\n// elem.allCategoriesContainer.addEventListener('click', onCategoryClick);\n\n// async function onCategoryClick(evt) {\n//   if (!evt.target.classList.contains('js-categories-list-item')) {\n//     return;\n//   }\n//   const categoryLink = evt.target.dataset.category;\n//   elem.categoriesBook.innerHTML = categoryLink; \n//   try {\n//     const booksByListName = await getBooksByCategory(categoryLink);\n\n//     const allBooksByGenre = createCardByGenre(booksByListName.data);\n\n//     addCardByGenre(allBooksByGenre);\n//   } catch (err) {\n//     console.log(err);\n//   }\n// }\n","const container = document.querySelector('.suport');\nconst loadMoreBtn = document.querySelector('.suport__button');\n//let limit = 0;\n//let inc = 3;\n\nconst array =[\n    {\n    title: 'Save the Children',\n    url:\n    'https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis ',\n            img: null,\n    },\n    {\n    title: 'Project HOPE',\n    url: 'https://www.projecthope.org/country/ukraine/ ',\n        img: null,\n    },\n    {\n    title: 'UNITED24',\n    url: 'https://u24.gov.ua/uk',\n        img: null,\n    },\n    {\n    title: 'International Medical Corps',\n    url: 'https://internationalmedicalcorps.org/country/ukraine/ ',\n        img: null,\n    },\n    {\n    title: 'Medicins Sans Frontieres',\n    url: 'https://www.msf.org/ukraine',\n        img: null,\n    },\n    {\n    title: 'RAZOM',\n    url: 'https://www.razomforukraine.org/ ',\n        img: null,\n    },\n    {\n    title: 'Action against hunger',\n    url: 'https://www.actionagainsthunger.org/location/europe/ukraine/',\n        img: null,\n    },\n    {\n    title: 'World vision',\n    url: 'https://www.wvi.org/emergencies/ukraine',\n        img: null,\n    },\n    {\n    title: 'Serhiy Prytula Charity Foundation',\n    url: 'https://prytulafoundation.org/en',\n        img: null,\n    },\n    ]\n\nfunction renderListSupport(array, limit) {\n    const markup = array\n    .map(({ title, url, img }, index) => {\n      index += 1;\n      if (index < limit + 1) {\n        return `        \n          <div class=\"logo_suport\">\n            0${index}<a\n              href=\"${url}\"\n              title=\"${title}\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n                </div>`;\n      }\n    })\n    .join('');\n  container.insertAdjacentHTML('beforeend', markup);\n}\n\n//loadMoreBtn.addEventListener('click', scrolList);\n\nfunction scrolList() {\n \n  if (limit === 6) {\n    if (inc < limit - 1) {\n      renderListScrol(array, limit, inc);\n      inc += 1;\n    } else {\n      renderListSupport(array, limit);\n      inc = 3;\n      return;\n    }\n  } else if (inc < limit + 3) {\n    renderListScrol(array, limit, inc);\n    inc += 1;\n  } else {\n    renderListSupport(array, limit);\n    inc = 2;\n    return;\n  }\n}\n\nfunction renderListScrol(array, limit, inc) {\n  const markup = array\n    .map(({ title, url, img }, index) => {\n      index += 1;\n      if (index >= inc && index < limit + inc) {\n        return `        \n          <div class=\"logo_suport\">\n            0${index}<a\n              href=\"${url}\"\n              title=\"${title}\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              >\n            </div>\n  `;\n      }\n    })\n    .join('');\n  container.innerHTML = markup;\n}\n\n\n\n\n "],"names":["BASE_URL","getCategoryList","params","axios","getTopBooks","getBooksByCategory","selectedCategory","categoriesBooks","categoriesBook","categoriesBooksTitle","loader","onLoad","onSeeMore","onBack","onSeeMoreAboutBookBest","onSeeMoreAboutBookGenre","topBooks","categories","createCategories","addCategoriesMarkup","err","loadBack","event","btn","arr","list_name","books","createCard","_id","author","book_image","title","markup","seeMoreGenre","genreByWord","lastWord","booksByGenre","allBooksByGenre","createCardByGenre","addCardByGenre","elem","createMarkupCategoryList","object","error"],"mappings":"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"}