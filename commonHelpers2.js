import"./assets/toggle_theme-056aedf1.js";const e={registrationForm:document.getElementById("registration_form"),loginForm:document.getElementById("login_form"),registrationName:document.getElementById("registration_name"),registrationEmail:document.getElementById("registration_email"),registrationPassword:document.getElementById("registration_password"),closeModalButton:document.getElementById("closeModalButton"),showRegistrationFormButton:document.getElementById("showRegistrationFormButton"),showLoginFormButton:document.getElementById("showLoginFormButton"),registerButton:document.getElementById("registerButton"),loginButton:document.getElementById("loginButton"),loginEmail:document.getElementById("login_email"),loginPassword:document.getElementById("login_password"),userDropdown:document.querySelector(".select-menu"),signUpButton:document.querySelector(".header-link-log-up"),mobileActiveAcc:document.querySelector(".mobile-active-acc"),userInfoContainer:document.getElementById("user_info"),userNameElement:document.querySelector(".user-name"),googleSignInButton:document.getElementById("googleSignInButton"),logoutButton:document.getElementById("logoutButton")},h={apiKey:"AIzaSyAQpcHlYnmJgrkoX3KbdR3qCIHswCf3vaM",authDomain:"bookshelf-smartfoxes-team.firebaseapp.com",projectId:"bookshelf-smartfoxes-team",storageBucket:"bookshelf-smartfoxes-team.appspot.com",messagingSenderId:"615845871184",appId:"1:615845871184:web:f8e6e3da332e48b2721b55",measurementId:"G-J4EFJFQ0WD"};firebase.initializeApp(h);const r=firebase.auth(),m=firebase.database();function g(t){localStorage.setItem("user_data",JSON.stringify(t))}function w(){e.registrationForm.style.display="none",window.location.href="./index.html"}function y(){e.registrationForm.style.display="flex",e.loginForm.style.display="none"}function E(){e.registrationForm.style.display="none",e.loginForm.style.display="flex"}function d(){let t=e.registrationName.value,i=e.registrationEmail.value,o=e.registrationPassword.value;if(!p(t)||!c(i)||!f(o)){alert("Registration failed. Please check your inputs.");return}r.createUserWithEmailAndPassword(i,o).then(n=>{let s=n.user,a=m.ref(),l={name:t,email:i,last_login:Date.now()};a.child("users/"+s.uid).set(l),g(l),alert("Registration successful!"),B(),window.location.href="./index.html"}).catch(n=>{alert(`Registration failed: ${n.message}`)})}function u(){let t=e.loginEmail.value,i=e.loginPassword.value;if(!c(t)||!f(i)){alert("Login failed. Please check your inputs.");return}r.signInWithEmailAndPassword(t,i).then(o=>{let n=o.user,s=m.ref(),a={last_login:Date.now()};s.child("users/"+n.uid).update(a),g(a),alert("Login successful!"),v(n),I(),window.location.href="./index.html"}).catch(o=>{alert(`Login failed: ${o.message}`)})}function c(t){return/^[^@]+@\w+(\.\w+)+\w$/.test(t)}function f(t){return t.length>=6}function p(t){return t.trim()!==""}function B(){e.registrationName.value="",e.registrationEmail.value="",e.registrationPassword.value=""}function I(){e.loginEmail.value="",e.loginPassword.value=""}function v(t){e.userInfoContainer&&e.userNameElement?(e.userInfoContainer.textContent=`Welcome, ${t.displayName||t.email}!`,e.userNameElement.textContent=t.displayName||t.email):console.error("Element with id 'user_info' or class 'user-name' not found.")}document.addEventListener("DOMContentLoaded",()=>{e.closeModalButton.addEventListener("click",w),e.showRegistrationFormButton.addEventListener("click",y),e.showLoginFormButton.addEventListener("click",E),e.registerButton.addEventListener("click",d),e.loginButton.addEventListener("click",u),e.registrationForm.addEventListener("keydown",o=>{o.key==="Enter"&&d()}),e.loginForm.addEventListener("keydown",o=>{o.key==="Enter"&&u()});function t(){const o=new firebase.auth.GoogleAuthProvider;r.signInWithPopup(o).then(n=>{n.user}).catch(n=>{console.error("Google login error:",n)})}e.googleSignInButton.addEventListener("click",t);function i(){localStorage.removeItem("user_data"),r.signOut().then(()=>{window.location.href="/"}).catch(o=>{console.error("Logout failed:",o)})}e.logoutButton.addEventListener("click",i)});firebase.auth().onAuthStateChanged(updateUI);
//# sourceMappingURL=commonHelpers2.js.map
