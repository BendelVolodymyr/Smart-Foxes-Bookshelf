(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const e={registrationForm:document.getElementById("registration_form"),loginForm:document.getElementById("login_form"),registrationName:document.getElementById("registration_name"),registrationEmail:document.getElementById("registration_email"),registrationPassword:document.getElementById("registration_password"),closeModalButton:document.getElementById("closeModalButton"),showRegistrationFormButton:document.getElementById("showRegistrationFormButton"),showLoginFormButton:document.getElementById("showLoginFormButton"),registerButton:document.getElementById("registerButton"),loginButton:document.getElementById("loginButton"),loginEmail:document.getElementById("login_email"),loginPassword:document.getElementById("login_password"),userDropdown:document.querySelector(".select-menu"),signUpButton:document.querySelector(".header-link-log-up"),mobileActiveAcc:document.querySelector(".mobile-active-acc"),userInfoContainer:document.getElementById("user_info"),userNameElement:document.querySelector(".user-name"),googleSignInButton:document.getElementById("googleSignInButton"),logoutButton:document.getElementById("logoutButton"),usernameDisplay:document.querySelector(".user-name"),toggleButtons:document.querySelectorAll(".toggle_buttons button")},h={apiKey:"AIzaSyAQpcHlYnmJgrkoX3KbdR3qCIHswCf3vaM",authDomain:"bookshelf-smartfoxes-team.firebaseapp.com",projectId:"bookshelf-smartfoxes-team",storageBucket:"bookshelf-smartfoxes-team.appspot.com",messagingSenderId:"615845871184",appId:"1:615845871184:web:f8e6e3da332e48b2721b55",measurementId:"G-J4EFJFQ0WD"};firebase.initializeApp(h);const l=firebase.auth(),m=firebase.database();function u(){location.href="index.html"}function g(t,i,n){e[t].style.display="flex",e[i].style.display="none",e.toggleButtons.forEach(s=>{s.classList.remove("clicked")}),e[n].classList.add("clicked")}function E(){g("registrationForm","loginForm","showRegistrationFormButton")}function B(){g("loginForm","registrationForm","showLoginFormButton")}function f(t){localStorage.setItem("user_data",JSON.stringify(t))}function w(){e.registrationForm.style.display="none"}function c(){let t=e.registrationName.value,i=e.registrationEmail.value,n=e.registrationPassword.value;if(!v(t)||!p(i)||!y(n)){alert("Registration failed. Please check your inputs.");return}l.createUserWithEmailAndPassword(i,n).then(s=>{let o=s.user,r=m.ref(),a={name:t,email:i,last_login:Date.now()};r.child("users/"+o.uid).set(a),f(a),alert("Registration successful!"),console.log("Name:",t),console.log("Email:",i),I(),u()}).catch(s=>{alert(`Registration failed: ${s.message}`)})}function d(){let t=e.loginEmail.value,i=e.loginPassword.value;if(!p(t)||!y(i)){alert("Login failed. Please check your inputs.");return}l.signInWithEmailAndPassword(t,i).then(n=>{let s=n.user,o=m.ref(),r={last_login:Date.now()};o.child("users/"+s.uid).update(r),f(r),alert("Login successful!"),console.log("Email:",t),b(s),L(),u()}).catch(n=>{alert(`Login failed: ${n.message}`)})}function p(t){return/^[^@]+@\w+(\.\w+)+\w$/.test(t)}function y(t){return t.length>=6}function v(t){return t.trim()!==""}function I(){e.registrationName.value="",e.registrationEmail.value="",e.registrationPassword.value=""}function L(){e.loginEmail.value="",e.loginPassword.value=""}function b(t){e.userInfoContainer&&e.userNameElement?(e.userInfoContainer.textContent=`Welcome, ${t.displayName||t.email}!`,e.userNameElement.textContent=t.displayName||t.email):console.error("Element with id 'user_info' or class 'user-name' not found.")}document.addEventListener("DOMContentLoaded",()=>{e.showRegistrationFormButton.addEventListener("click",E),e.showLoginFormButton.addEventListener("click",B),e.registerButton.addEventListener("click",c),e.loginButton.addEventListener("click",d),e.closeModalButton.addEventListener("click",w),e.registrationForm.addEventListener("keydown",n=>{n.key==="Enter"&&c()}),e.loginForm.addEventListener("keydown",n=>{n.key==="Enter"&&d()});function t(){const n=new firebase.auth.GoogleAuthProvider;l.signInWithPopup(n).then(s=>{s.user}).catch(s=>{console.error("Google login error:",s)})}e.googleSignInButton.addEventListener("click",t);function i(){localStorage.removeItem("user_data"),l.signOut().then(()=>{u()}).catch(n=>{console.error("Logout failed:",n)})}e.logoutButton.addEventListener("click",i)});function F(t){t&&(e.usernameDisplay.textContent=t.displayName||t.email,e.userDropdown.classList.remove("is-hidden"),e.signUpButton.style.display="none",e.mobileActiveAcc.classList.remove("is-hidden"))}firebase.auth().onAuthStateChanged(F);
//# sourceMappingURL=reg_start.js.map
